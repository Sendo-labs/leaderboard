["PRR_kwDOQF3eqM7JV46U", "PR_kwDOQF3eqM6vj_aL", "COMMENTED", "## Pull Request Overview\n\nThis PR adds **optional referral fee support** for Jupiter Legacy Swap, enabling platform fees (0-10%) to be collected on swaps. It introduces environment-based configuration for fee collection modes (`sol_only` or `smart`), automatic ATA derivation for fee accounts, and comprehensive testing/documentation.\n\n**Key Changes:**\n- Referral fee infrastructure with `platformFeeBps` (quote) and `feeAccount` (swap) parameters\n- Two fee collection modes with automatic mint selection and ATA derivation\n- Live integration tests, E2E mainnet scripts, and comprehensive documentation\n\n### Reviewed Changes\n\nCopilot reviewed 10 out of 13 changed files in this pull request and generated 4 comments.\n\n<details>\n<summary>Show a summary per file</summary>\n\n| File | Description |\r\n| ---- | ----------- |\r\n| `tsup.config.ts` | Added E2E script to build entry points |\r\n| `src/types.ts` | Added referral config types (`FeeMode`, `ReferralConfig`, `FeeMintSelection`) |\r\n| `src/service.ts` | Core referral logic: config loading, mint selection, ATA derivation, and integration into quote/swap flows |\r\n| `src/scripts/e2e-mainnet.ts` | E2E mainnet script with simulation and optional signing/sending |\r\n| `src/index.ts` | Exported `JupiterService` for direct usage |\r\n| `src/__tests__/referral.test.ts` | Basic referral config validation tests |\r\n| `src/__tests__/integration.test.ts` | Live integration tests against Jupiter API |\r\n| `package.json` | Added dependencies (`dotenv`, `tsx`) and E2E scripts |\r\n| `env.example` | Environment variable documentation for referral config |\r\n| `README.md` | Comprehensive documentation on features, setup, and usage |\n</details>\n\n\n\n\n\n\n---\n\n\ud83d\udca1 <a href=\"/Sendo-labs/plugin-jupiter/new/1.x/.github?filename=*.instructions.md\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href=\"https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Learn how to get started</a>.", "2025-10-24T17:15:38Z", "copilot-pull-request-reviewer", "2025-10-24 20:13:43"]
